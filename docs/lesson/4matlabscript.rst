Написание скрипта в matlab
=========================

Этот код MATLAB предназначен для инициализации параметров и начальных условий, запуска симуляции модели летательного аппарата в Simulink, извлечения данных о результатах симуляции и управления моделями Simulink.

    .. code-block:: matlab
        clear;

        % init parameters

        [A, B, C, D] = uav1_data();

        init = [0.1 0 0 0];
        ref_signal = -0.1;

        t_s = 0;
        t_e = 1200;
        dt = 0.1;

        sim_out = sim('uav1_model.slx');

        y = sim_out.get('yout');

        u = y.getElement(1).Values.Data;
        w = y.getElement(2).Values.Data;
        q = y.getElement(3).Values.Data;
        theta = y.getElement(4).Values.Data;
        t = y.getElement(5).Values.Data;


        bdclose('all');
        open('uav1_model.slx');

Этот код MATLAB выполняет следующие действия:

### 1. Очистка рабочей среды

```matlab
clear;
```
Очистка всех переменных из рабочей области MATLAB, что помогает избежать конфликтов с предыдущими данными или переменными.

### 2. Инициализация параметров модели

```matlab
[A, B, C, D] = uav1_data();
```
Функция `uav1_data` вызывается для получения матриц системы (`A`, `B`, `C`, `D`). Эти матрицы обычно используются для описания динамики системы в виде состояния.

### 3. Установка начальных условий и параметров симуляции

```matlab
init = [0.1 0 0 0];
ref_signal = -0.1;
```
- `init` задает начальные условия для состояния системы (например, начальное угловое положение, скорость и т.д.).
- `ref_signal` задает целевое значение сигнала управления или референсный сигнал.

```matlab
t_s = 0;
t_e = 1200;
dt = 0.1;
```
- `t_s` — начальное время симуляции.
- `t_e` — конечное время симуляции.
- `dt` — шаг времени симуляции.

### 4. Запуск симуляции

```matlab
sim_out = sim('uav1_model.slx');
```
Запускается симуляция модели, которая находится в файле `uav1_model.slx`. Результаты симуляции сохраняются в переменной `sim_out`.

### 5. Извлечение данных из результатов симуляции

```matlab
y = sim_out.get('yout');
```
Извлекается выходной сигнал из результата симуляции.

```matlab
u = y.getElement(1).Values.Data;
w = y.getElement(2).Values.Data;
q = y.getElement(3).Values.Data;
theta = y.getElement(4).Values.Data;
t = y.getElement(5).Values.Data;
```
- `u`, `w`, `q`, `theta`, и `t` — это данные о различных переменных (например, управление, угловая скорость, угловое ускорение, угол наклона и время), которые извлекаются из результата симуляции.

### 6. Закрытие и открытие модели в Simulink

```matlab
bdclose('all');
open('uav1_model.slx');
```
- `bdclose('all')` — закрывает все открытые модели Simulink.
- `open('uav1_model.slx')` — открывает модель Simulink `uav1_model.slx` для просмотра или дальнейшего редактирования.

